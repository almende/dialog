<html>
	<head>
		<title>Showing TalkTalk using - CHAP Dialog Tools</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script src="js/simpleQ.js"></script>
		<link rel='stylesheet' href="css/simpleQ.css"/>
		<link rel='stylesheet' href="../../css/projects.css"/>
		<script>
		
			//Post to Eve agent for first TalkTalk question
			//Post each answer
			var question_no="";
			var answer = function(answer_id){
				if (!answer_id) question_no="";
				$.ajax({
					url:"http://char-a-lot.appspot.com/rpc",
					cache:false,
					contentType:"application/json",
					dataType:"json",
					data:JSON.stringify({
						method:answer_id!=null?"answer":"startDialog",
						id:1,
						params:{
							question_url:"http://char-a-lot.appspot.com/talktalk?question_no="+question_no,
							answer_id:answer_id,
							expanded_texts:true
						}
					}),
					type:"POST",
					success:function(json){
						//replace callback by local function
						if (json.result.answers){
							json.result.answers.map(function (ans){
								ans.callback=function(){
									answer(ans.answer_id);
								}
							});
						}
						question_no = json.result.question_id;						
						$(".question_container").simpleQ(
							json.result
						)
					}
				});
			};
			$(document).ready(function() {
				answer(null);
			});

		</script>
	</head>
	<body>
		<div class="question_background">
			<a href="javascript:answer(null)">(Re)Open question</a>.
			<br>
			<div class="question_container"></div>
		</div>
	</body>
</html>