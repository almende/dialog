<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	  <meta charset="utf-8">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	  <title>Last FM Loved Tracks</title>
	  <meta name="description" content="">
	  <meta name="viewport" content="width=device-width">
	
	  <link rel="stylesheet" href="/src/css/bootstrap.css">
	  <link rel="stylesheet" href="/src/css/responsive.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="/src/img/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/src/img/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/src/img/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/src/img/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/src/img/ico/apple-touch-icon-57-precomposed.png">
    
    <style type="text/css">
      #wrap {
	      margin-top: 80px;
        margin-bottom: 40px;
      }
      @media (max-width: 979px) {
      	#wrap {
	      	margin: 0;
      	}
      }
      .nav-tabs li {
      	text-align: center;
      }
      .nav-tabs li span {
	      font-size: 52px;
	      display: block;
	      margin-top: 15px;
	      margin-bottom: 10px;
      }
      #records,
      .tablepager {
	      display: none;
      }
      #records tbody tr {
	      height: 90px;
      }
      #records tr td a img {
	      width: 60px;
	      height: 60px;
      }
    </style>
	</head>
	<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Last FM &#9829; Loved Tracks</a>
          <!--
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
                </ul>
              </li>
            </ul>
          </div>
          -->
          <!--/.nav-collapse -->
        </div>
      </div>
    </div>
    
    <div id="wrap">

	    <div class="container">
	
	      <div class="row">
	        <div class="span12">
	        	<form class="form-search pull-right">
						  <input type="text" class="input-medium search-query" placeholder="Search">
						  <!-- <input type="text" placeholder="Text input"> -->
						  <!-- <button type="submit" class="btn">Search</button> -->
						</form>
	        </div>
	      </div>
	      
	      <div class="row">
	        <div class="span12">
	        
		    		<div class="tabbable tabs-left">
		    		
		          <ul class="nav nav-tabs">
		            <li class="active">
		            	<a href="#lA" data-toggle="tab">
		            		<span class="entypo">&#59185;</span>
			            	Records
		            	</a>
		            </li>
		            <!--
		            <li>
		            	<a href="#lB" data-toggle="tab">
		            		<span class="entypo">&#128197;</span>
			            	Agenda
		            	</a>
		            </li>
		            <li>
		            	<a href="#lC" data-toggle="tab">
		            		<span class="entypo">&#128640;</span>
			            	Help
		            	</a>
		            </li>
		            -->
		          </ul>
		          
		          <div class="tab-content">
		            <div class="tab-pane active" id="lA">
		            
		            	<div id="loading">
			            	<p>Fetching records..</p>
		            	</div>
			            
			            <table id="records" class="tablesorter table table-striped table-hover">
										<thead>
											<tr>
												<th></th>
												<th>Title</th>
												<th>Artist</th>
												<th>Loved at</th>
											</tr>
										</thead>
										<tbody></tbody>
									</table>
            
									<div class="tablepager">
										<form>
				              <div class="pager-btns input-prepend">
				              	<div class="btn-group">
											  	<button class="btn first" type="button"><i class="icon-step-backward"></i></button>
											  	<button class="btn prev" type="button"><i class="icon-backward"></i></button>
				              	</div>
											  <input class="span1 pagedisplay" type="text">
											  <div class="btn-group">
											  	<button class="btn next" type="button"><i class="icon-forward"></i></button>
											  	<button class="btn last" type="button"><i class="icon-step-forward"></i></button>
											  </div>
											</div>
											<select class="pagesize">
												<option selected="selected" value="10">10</option>
												<option value="20">20</option>
												<option value="30">30</option>
												<option value="40">40</option>
											</select>
										</form>
									</div>
	            
		            </div>
		            <!--
		            <div class="tab-pane" id="lB">
		              <p>Howdy, I'm in Section B.</p>
		            </div>
		            <div class="tab-pane" id="lC">
		              <p>What up girl, this is Section C.</p>
		            </div>
		            -->
		          </div>
		          
		        </div>
	            
	        </div>
	      </div>
	
	      <hr>
	
	      <footer>
	        <p>&copy; Ask community Systems 2012</p>
	      </footer>
	
	    </div> <!-- /container -->
	    
    </div> <!-- /wrap -->

    <script src="/src/js/libs/jquery/jquery.js"></script>
    <script src="/src/js/libs/bootstrap/bootstrap.js"></script>
    
    <script src="/src/js/libs/tablesorter/tablesorter.js"></script>
    <script src="/src/js/libs/tablesorter/tablesorter.pager.js"></script>
    
    <script src="/src/js/main.js"></script>
    
    <script type="text/javascript">
	    $('document').ready(function()
	    {
		    $('.tabs-left .tab-content').css({ minHeight: $('.tabs-left .nav-tabs').height() - 41 });
		    
				$.getJSON(
					'http://ws.audioscrobbler.com/2.0/?',
					{
			    	method: 'user.getlovedtracks',
				    api_key: 'a3ffda3065e4aecb4f263ea1a03f8d88',
				    user: 'thawebb',
				    format: 'json',
				    limit: 130
			    }
				).success(function(data)
					{
						$('#loading').hide();
						$('#records').show();
						$('.tablepager').show();
						
						var tracks = data.lovedtracks.track;
						
						$(tracks).each(function(index, track)
						{
							var img = (track.image != undefined) ? '<a href="' + track.url + '" class="thumbnail"><img src="' + track.image[0]['#text'] + '"></a>' : '';
							
							var row = '<tr><td>' + img + '</td><td><a href="' + track.url + '">' + track.name + '</a></td><td><a href="' + track.artist.url + '">' + track.artist.name + '</a></td><td>' + track.date['#text'] + '</td></tr>';
		          $('#records tbody').append(row);
						})
						
				    $("#records")
					    .tablesorter(
					    	{
					    		widthFixed: true,
					    		headers: {
						    		0: {
							    		sorter: false
						    		},
						    		3: {
							    		sorter: false
						    		}
					    		},
					    		sortList: [[2,0]]
					    	}
				    	)
				    	.tablesorterPager(
					    	{
					    		container: $(".tablepager"),
					    		size: 10
					    	}
				    	);	
		    	
		    	
					}
				)	
				
	    })
    </script>
    
  </body>
</html>
